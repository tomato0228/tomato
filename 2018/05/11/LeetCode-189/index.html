<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> LeetCode_189_旋转数组 · Tomato Blog</title><meta name="description" content="I have no idea how long I can keep working on that. The only thing I hope is that it can record every detail in my life, and create stories for my-future-self."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">Home</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   Blog</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2018/05/11/LeetCode-189/" class="post-title-link">LeetCode_189_旋转数组</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/算法/" class="post-tag-link">算法</a></li><li class="post-tag-item"><a href="/tags/LeetCode/" class="post-tag-link">LeetCode</a></li></ul><div class="post-time">Friday, May 11th 2018</div></div><div class="post-content"><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p><a href="https://leetcode-cn.com/problems/rotate-array/description/" target="_blank" rel="noopener"><code>旋转数组</code></a> <a href="https://leetcode.com/problems/rotate-array/description/" target="_blank" rel="noopener"><code>Rotate Array</code></a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><p>给定一个数组，将数组中的元素向右移动 k 个位置，其中 k 是非负数。</p>
<p><strong>示例 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">输入: [1,2,3,4,5,6,7] 和 k = 3</span><br><span class="line">输出: [5,6,7,1,2,3,4]</span><br><span class="line">解释:</span><br><span class="line">向右旋转 1 步: [7,1,2,3,4,5,6]</span><br><span class="line">向右旋转 2 步: [6,7,1,2,3,4,5]</span><br><span class="line">向右旋转 3 步: [5,6,7,1,2,3,4]</span><br></pre></td></tr></table></figure>
<p><strong>示例 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入: [-1,-100,3,99] 和 k = 2</span><br><span class="line">输出: [3,99,-1,-100]</span><br><span class="line">解释: </span><br><span class="line">向右旋转 1 步: [99,-1,-100,3]</span><br><span class="line">向右旋转 2 步: [3,99,-1,-100]</span><br></pre></td></tr></table></figure>
<p><strong>说明:</strong></p>
<ul>
<li>尽可能想出更多的解决方案，至少有三种不同的方法可以解决这个问题。</li>
<li>要求使用空间复杂度为 O(1) 的原地算法。</li>
</ul>
<p><strong>Tags</strong>: 数组</p>
<h2 id="思路-0"><a href="#思路-0" class="headerlink" title="思路 0"></a>思路 0</h2><p>思路 0，是一个比较傻的方法，完全是投机取巧，基于 vector 的动态性质来的，对于练习题来说，这种方法个人不太推荐，得不到什么锻炼。</p>
<h3 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h3><p>vector 的 push_back 和erase 可以很容易的实现。<br>如例一，将开始的，1234放入vector后面，然后将前面的1234删掉，当然也可以边放在后面边删除前面的。详情见代码。</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">1</span> || nums.size() &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k = nums.size() - (k % nums.size());</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">            nums.push_back(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        nums.erase(nums.begin(),nums.begin()+k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路 1"></a>思路 1</h2><p>采用交换的方法，一种暴力的方法，比较简单。</p>
<h3 id="解决思路-1"><a href="#解决思路-1" class="headerlink" title="解决思路"></a>解决思路</h3><p><strong>开始 ：</strong><br>begin = 0, tIndex = 0, 都是 nums 的下标;<br>t = nums[tIndex], count = 0; count是控制循环的次数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">例一为例，采用思路 1 的方法数组 nums 的变化过程如下：</span><br><span class="line">1 2 3 4 5 6 7   tIndex = 0, t = 1, count = 0</span><br><span class="line">1 2 3 1 5 6 7   tIndex = 3, t = 4, count = 1</span><br><span class="line">1 2 3 1 5 6 4   tIndex = 6, t = 7, count = 2</span><br><span class="line">1 2 7 1 5 6 4   tIndex = 2, t = 3, count = 3</span><br><span class="line">1 2 7 1 5 3 4   tIndex = 5, t = 6, count = 4</span><br><span class="line">1 6 7 1 5 3 4   tIndex = 1, t = 2, count = 5</span><br><span class="line">1 6 7 1 2 3 4   tIndex = 4, t = 5, count = 6</span><br><span class="line">5 6 7 1 2 3 4   tIndex = 0, t = 1, count = 7;count == nums.size()</span><br></pre></td></tr></table></figure>
<p>表示所有的数都已经交换，则停止循环<br>若 tIndex == begin 且 count == nums.size() 表示当前分组交换完毕，但是并不是所有数都交换，则 begin ++, tIndex ++, t = nums[tIndex] 继续交换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">需要begin ++, tIndex ++, t = nums[tIndex]继续交换的例子：</span><br><span class="line">nums[] = [1, 2, 3, 4, 5, 6], k = 2;</span><br><span class="line">1 2 3 4 5 6   tIndex = 0, t = 1, count = 0, begin = 0</span><br><span class="line">1 2 1 4 5 6   tIndex = 2, t = 3, count = 1, begin = 0</span><br><span class="line">1 2 1 4 3 6   tIndex = 4, t = 5, count = 2, begin = 0</span><br><span class="line">5 2 1 4 3 6   tIndex = 0, t = 1, count = 3, begin = 0</span><br><span class="line">              tIndex == begin, 则begin ++, tIndex ++, t = nums[tIndex]</span><br><span class="line">              ==&gt; begin = 1, tIndex = 1, t = 2, count = 3</span><br><span class="line">5 2 1 2 3 6   tIndex = 3, t = 4, count = 4, begin = 1</span><br><span class="line">5 2 1 2 3 4   tIndex = 5, t = 6, count = 5, begin = 1</span><br><span class="line">5 6 1 2 3 4   tIndex = 1, t = 2, count = 6, begin = 1</span><br><span class="line">count == nums.size(); 交换完毕</span><br></pre></td></tr></table></figure>
<p>该方法主要难点是，控制好循环的次数，尤其是 nums.size() 是 k 的倍数的时候。</p>
<h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">1</span> || nums.size() &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k = k % nums.size();</span><br><span class="line">        <span class="keyword">int</span> length = nums.size();</span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>, tIndex = <span class="number">0</span>, t = nums[tIndex], count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            swap(t, nums[(tIndex + k) % length]);</span><br><span class="line">            tIndex = (tIndex + k) % length;</span><br><span class="line">            <span class="keyword">if</span> (tIndex == begin) &#123;</span><br><span class="line">                begin ++;</span><br><span class="line">                tIndex ++;</span><br><span class="line">                t = nums[tIndex];</span><br><span class="line">            &#125;</span><br><span class="line">            count ++;</span><br><span class="line">        &#125; <span class="keyword">while</span> (count &lt; length);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="思路-2"><a href="#思路-2" class="headerlink" title="思路 2"></a>思路 2</h2><p>一个很巧妙的翻转策略</p>
<h3 id="解决思路-2"><a href="#解决思路-2" class="headerlink" title="解决思路"></a>解决思路</h3><p>一个很巧妙的交换策略，类似翻转字符的方法，先把前 n - k 个数字翻转一下，再把后 k 个数字翻转一下，最后再把整个数组翻转一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">例一为例，采用思路 2 的方法数组 nums 的变化过程如下：</span><br><span class="line">1 2 3 4 5 6 7   原数组nums, k = 3, n = nums.size() = 7</span><br><span class="line">4 3 2 1 5 6 7   先将数组前 n - k 个数字翻转</span><br><span class="line">4 3 2 1 7 6 5   先将数组后 k 个数字翻转</span><br><span class="line">5 6 7 4 3 2 1   最后将整个数组翻转</span><br></pre></td></tr></table></figure>
<h3 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">1</span> || nums.size() &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k = k % nums.size();</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        reverse(nums.begin(), nums.begin() + n - k);</span><br><span class="line">        reverse(nums.begin() + n - k, nums.end());</span><br><span class="line">        reverse(nums.begin(), nums.end());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="思路-3"><a href="#思路-3" class="headerlink" title="思路 3"></a>思路 3</h2><p>从倒数第 k 个开始交换</p>
<h3 id="解决思路-3"><a href="#解决思路-3" class="headerlink" title="解决思路"></a>解决思路</h3><p><strong>核心代码：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">0</span>; k %= n; n -= k) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i ++) &#123;</span><br><span class="line">        swap(nums[begin ++], nums[begin + n - k]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先先将最后k个元素与第k个元素交换。<br>得到结果为k个元素的位置是正确的。<br>我们继续处理剩下的(n - k)元素。<br>一次循环后n = n - k, k = k % n;</p>
<p>nums[] = [1, 2, 3, 4, 5, 6, 7, 8], k = 2;<br>k   n   |   nums<br>3   8   |   <strong>1,2,3,4,5,6,7,8</strong><br>3   5   |   6,7,8,<strong>4,5,1,2,3</strong><br>1   2   |   6,7,8,1,2,3,<strong>5,4</strong><br>0   1   |   6,7,8,1,2,3,4,<strong>5</strong></p>
<p>详细过程如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nums[] = [1, 2, 3, 4, 5, 6, 7, 8], k = 2;</span><br><span class="line">      nums          k   n   i   begin   nums[begin]&lt;==&gt;nums[begin + n - k]</span><br><span class="line">1 2 3 4 5 6 7 8     3   8</span><br><span class="line">                    3   8   0     0     nums[0]&lt;==&gt;nums[5]</span><br><span class="line">6 2 3 4 5 1 7 8     3   8   1     1     nums[1]&lt;==&gt;nums[6]</span><br><span class="line">6 7 3 4 5 1 2 8     3   8   2     2     nums[2]&lt;==&gt;nums[7]</span><br><span class="line">6 7 8 4 5 1 2 3     3   8   3</span><br><span class="line">                    3   5   0     3     nums[3]&lt;==&gt;nums[4]</span><br><span class="line">6 7 8 1 5 4 2 3     3   5   1     4     nums[4]&lt;==&gt;nums[5]</span><br><span class="line">6 7 8 1 2 4 5 3     3   5   2     5     nums[5]&lt;==&gt;nums[6]</span><br><span class="line">6 7 8 1 2 3 5 4     3   5   3</span><br><span class="line">                    1   2   0     6     nums[6]&lt;==&gt;nums[7]</span><br><span class="line">6 7 8 1 2 3 4 5     1   2   1</span><br><span class="line">                    0   1</span><br></pre></td></tr></table></figure>
<h3 id="Code-3"><a href="#Code-3" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">1</span> || nums.size() &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k = k % nums.size();</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">0</span>; k %= n; n -= k) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i ++) &#123;</span><br><span class="line">                swap(nums[begin ++], nums[begin + n - k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</div></article><div class="pagination"><a href="/2018/05/11/LeetCode-36/" class="pagination-prev">PREV</a><a href="/2018/05/10/LeetCode-6/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/25/LeetCode-13/">LeetCode_13_罗马数字转整数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/25/LeetCode-11/">LeetCode_11_盛最多水的容器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/25/LeetCode-9/">LeetCode_9_回文数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/25/LeetCode-8/">LeetCode_8_字符串转整数 (atoi)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/25/LeetCode-7/">LeetCode_7_反转整数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/22/LeetCode-350/">LeetCode_350_两个数组的交集 II</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/22/LeetCode-136/">LeetCode_136_只出现一次的数字</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/22/LeetCode-217/">LeetCode_217_存在重复元素</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2018 <a href="/">Tomato</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>